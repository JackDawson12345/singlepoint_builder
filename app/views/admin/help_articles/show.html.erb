<%# app/views/admin/help_articles/show.html.erb %>
<div class="max-w-5xl">
  <div class="mb-8">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-x-3">
        <%= link_to admin_help_articles_path, class: "text-gray-400 hover:text-gray-500" do %>
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
          </svg>
        <% end %>
        <div>
          <h1 class="nata-sans page-title"><%= @help_article.title %></h1>
          <p class="nata-sans text-sm text-gray-500 mt-1">
            Created <%= @help_article.created_at.strftime("%B %d, %Y at %I:%M %p") %>
          </p>
        </div>
      </div>
      <div class="flex items-center gap-x-3">
        <%= link_to "Edit", admin_edit_help_article_path(@help_article), class: "nata-sans inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50" %>
        <%= button_to "Delete", admin_help_article_path(@help_article), method: :delete,
                      data: { confirm: "Are you sure you want to delete this help article?" },
                      class: "nata-sans inline-flex items-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500" %>
      </div>
    </div>
  </div>

  <!-- Article Details Card -->
  <div class="bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl mb-6">
    <div class="px-4 py-6 sm:p-8">
      <h2 class="nata-sans text-base font-semibold leading-7 text-gray-900 mb-4">Article Details</h2>
      <dl class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4">
        <div class="border-t border-gray-100 pt-4">
          <dt class="nata-sans text-sm font-medium text-gray-500">Priority</dt>
          <dd class="nata-sans mt-1 text-sm text-gray-900">
            <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium <%= (@help_article.priority || 0) > 5 ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800' %>">
              <%= @help_article.priority || 0 %>
            </span>
          </dd>
        </div>
        <div class="border-t border-gray-100 pt-4">
          <dt class="nata-sans text-sm font-medium text-gray-500">Author</dt>
          <dd class="nata-sans mt-1 text-sm text-gray-900">
            <%= @help_article.user&.email || 'N/A' %>
          </dd>
        </div>
        <div class="border-t border-gray-100 pt-4">
          <dt class="nata-sans text-sm font-medium text-gray-500">Created</dt>
          <dd class="nata-sans mt-1 text-sm text-gray-900">
            <%= @help_article.created_at.strftime("%B %d, %Y at %I:%M %p") %>
          </dd>
        </div>
        <div class="border-t border-gray-100 pt-4">
          <dt class="nata-sans text-sm font-medium text-gray-500">Last Updated</dt>
          <dd class="nata-sans mt-1 text-sm text-gray-900">
            <%= @help_article.updated_at.strftime("%B %d, %Y at %I:%M %p") %>
          </dd>
        </div>
        <% if @help_article.keywords.present? %>
          <div class="border-t border-gray-100 pt-4 sm:col-span-2">
            <dt class="nata-sans text-sm font-medium text-gray-500 mb-2">Keywords</dt>
            <dd class="nata-sans mt-1 flex flex-wrap gap-2">
              <% @help_article.keywords.each do |keyword| %>
                <span class="inline-flex items-center rounded-full bg-blue-100 px-3 py-0.5 text-xs font-medium text-blue-800">
                  <%= keyword %>
                </span>
              <% end %>
            </dd>
          </div>
        <% end %>
      </dl>
    </div>
  </div>

  <!-- Content Card -->
  <div class="bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl mb-6">
    <div class="px-4 py-6 sm:p-8">
      <h2 class="nata-sans text-base font-semibold leading-7 text-gray-900 mb-4">Content</h2>
      <div class="article-content">
        <%= sanitize(@help_article.text, tags: %w[p strong em u ol ul li br h1 h2 h3 h4 h5 h6 a img span div], attributes: %w[href src alt class style data-list contenteditable]) %>
      </div>
    </div>
  </div>

  <style>
      .article-content {
          font-family: inherit;
          font-size: 0.875rem;
          line-height: 1.5;
          color: #374151;
      }

      .article-content p {
          margin-bottom: 1rem !important;
      }

      .article-content strong {
          font-weight: 600 !important;
          color: #111827 !important;
      }

      .article-content em {
          font-style: italic !important;
      }

      .article-content u {
          text-decoration: underline !important;
      }

      .article-content ol {
          list-style-type: decimal !important;
          list-style-position: outside !important;
          margin-left: 1.5rem !important;
          margin-bottom: 1rem !important;
          padding-left: 0.5rem !important;
      }

      .article-content ul {
          list-style-type: disc !important;
          list-style-position: outside !important;
          margin-left: 1.5rem !important;
          margin-bottom: 1rem !important;
          padding-left: 0.5rem !important;
      }

      .article-content li {
          margin-bottom: 0.5rem !important;
          padding-left: 0.5rem !important;
          display: list-item !important;
      }

      .article-content h1 {
          font-size: 1.5rem !important;
          font-weight: 700 !important;
          margin-bottom: 1rem !important;
          margin-top: 1.5rem !important;
      }

      .article-content h2 {
          font-size: 1.25rem !important;
          font-weight: 700 !important;
          margin-bottom: 0.75rem !important;
          margin-top: 1.25rem !important;
      }

      .article-content h3 {
          font-size: 1.125rem !important;
          font-weight: 700 !important;
          margin-bottom: 0.5rem !important;
          margin-top: 1rem !important;
      }

      .article-content h4 {
          font-size: 1rem !important;
          font-weight: 700 !important;
          margin-bottom: 0.5rem !important;
          margin-top: 0.75rem !important;
      }

      .article-content a {
          color: #4f46e5 !important;
          text-decoration: underline !important;
      }

      .article-content a:hover {
          color: #4338ca !important;
      }

      .article-content img {
          max-width: 100% !important;
          height: auto !important;
          border-radius: 0.5rem !important;
          margin: 1rem 0 !important;
      }
  </style>

</div>